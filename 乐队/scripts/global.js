function addLoadEvent(a){var b=window.onload;if(typeof window.onload!="function"){window.onload=a}else{window.onload=function(){b();a()}}}function insertAfter(c,a){var b=a.parentNode;if(b.lastChild==a){b.appendChild(c)}else{b.insertBefore(c,a.nextSibling)}}function addClass(a,b){if(!a.className){a.className=b}else{newClassName=a.className;newClassName+=" ";newClassName+=b;a.className=newClassName}}function highlightPage(){if(!document.getElementsByTagName){return false}if(!document.getElementById){return false}var f=document.getElementsByTagName("header");if(f.length==0){return false}var e=f[0].getElementsByTagName("nav");if(e.length==0){return false}var a=e[0].getElementsByTagName("a");var c;for(var b=0;b<a.length;b++){c=a[b].getAttribute("href");if(window.location.href.indexOf(c)!=-1){a[b].className="here";var d=a[b].lastChild.nodeValue.toLowerCase();document.body.setAttribute("id",d)}}}addLoadEvent(highlightPage);function moveElement(a,e,d,c){if(!document.getElementById){return false}if(!document.getElementById(a)){return false}var f=document.getElementById(a);if(f.movement){clearTimeout(f.movement)}if(!f.style.left){f.style.left="0px"}if(!f.style.top){f.style.top="0px"}var b=parseInt(f.style.left);var h=parseInt(f.style.top);if(b==e&&h==d){return true}if(b<e){dist=Math.ceil((e-b)/10);b=b+dist}if(b>e){dist=Math.ceil((e-b)/10);b=b+dist}if(h<d){dist=Math.ceil((d-h)/10);h=h+dist}if(h>d){dist=Math.ceil((d-h)/10);h=h+dist}f.style.left=b+"px";f.style.top=h+"px";var g="moveElement('"+a+"',"+e+","+d+","+c+")";f.movement=setTimeout(g,c)}function prepareSlideshow(){if(!document.getElementsByTagName){return false}if(!document.getElementById){return false}if(!document.getElementById("intro")){return false}var e=document.getElementById("intro");var d=document.createElement("div");d.setAttribute("id","slideshow");var g=document.createElement("img");g.setAttribute("src","images/frame.gif");g.setAttribute("alt","");g.setAttribute("id","frame");d.appendChild(g);var f=document.createElement("img");f.setAttribute("src","images/slideshow.gif");f.setAttribute("alt","a imge waits you");f.setAttribute("id","preview");d.appendChild(f);insertAfter(d,e);var b=document.getElementsByTagName("a");var a;for(var c=0;c<b.length;c++){b[c].onmouseover=function(){a=this.getAttribute("href");if(a.indexOf("index.html")!=-1){moveElement("preview",0,0,5)}if(a.indexOf("about.html")!=-1){moveElement("preview",-150,0,5)}if(a.indexOf("photos.html")!=-1){moveElement("preview",-300,0,5)}if(a.indexOf("live.html")!=-1){moveElement("preview",-450,0,5)}if(a.indexOf("contact.html")!=-1){moveElement("preview",-600,0,5)}}}}addLoadEvent(prepareSlideshow);function showSection(c){var b=document.getElementsByTagName("section");for(var a=0;a<b.length;a++){if(b[a].getAttribute("id")!==c){b[a].style.display="none"}else{b[a].style.display="block"}}}function prepareInternalnav(){if(!document.getElementsByTagName){return false}if(!document.getElementById){return false}var c=document.getElementsByTagName("article");if(c.length===0){return false}var e=c[0].getElementsByTagName("nav");if(e.length===0){return false}var f=e[0];var a=f.getElementsByTagName("a");for(var b=0;b<a.length;b++){var d=a[b].getAttribute("href").split("#")[1];if(!document.getElementById(d)){continue}document.getElementById(d).style.display="none";a[b].destination=d;a[b].onclick=function(){showSection(this.destination);return false}}}addLoadEvent(prepareInternalnav);function showPic(a){if(!document.getElementById("placeholder")){return true}var c=a.getAttribute("href");var e=document.getElementById("placeholder");e.setAttribute("src",c);if(!document.getElementById("description")){return false}if(a.getAttribute("title")){var d=a.getAttribute("title")}else{var d=""}var b=document.getElementById("description");if(b.firstChild.nodeType===3){b.firstChild.nodeValue=d}return false}function preparePlaceholder(){if(!document.createElement){return false}if(!document.createTextNode){return false}if(!document.getElementById){return false}if(!document.getElementById("imagegallery")){return false}var d=document.createElement("img");d.setAttribute("id","placeholder");d.setAttribute("src","../images/placeholder.gif");d.setAttribute("alt","my image gallery");var c=document.createElement("p");c.setAttribute("id","description");var b=document.createTextNode("请选择一个图片");c.appendChild(b);var a=document.getElementById("imagegallery");insertAfter(c,a);insertAfter(d,c)}addLoadEvent(preparePlaceholder);function prepareGallery(){if(!document.getElementsByTagName){return false}if(!document.getElementById){return false}if(!document.getElementById("imagegallery")){return false}var a=document.getElementById("imagegallery");var b=a.getElementsByTagName("a");for(var c=0;c<b.length;c++){b[c].onclick=function(){return showPic(this)}}}addLoadEvent(prepareGallery);function stripeTables(){if(!document.getElementsByTagName){return false}var c=document.getElementsByTagName("table");var e,d;for(var b=0;b<c.length;b++){e=false;d=c[b].getElementsByTagName("tr");for(var a=0;a<d.length;a++){if(e==true){addClass(d[a],"odd");e=false}else{e=true}}}}function highLightRows(){if(!document.getElementsByTagName){return false}var b=document.getElementsByTagName("tr");for(var a=0;a<b.length;a++){b[a].oldClassName=b[a].className;b[a].onmouseover=function(){addClass(this,"highlight")};b[a].onmouseout=function(){this.className=this.oldClassName}}}function displayAbbreviations(){if(!document.getElementsByTagName||!document.createElement||!document.createTextNode){return false}var f=document.getElementsByTagName("abbr");if(f.length<1){return false}var d=new Array();for(var g=0;g<f.length;g++){var p=f[g];var c=p.getAttribute("title");var n=p.lastChild.nodeValue;d[n]=c}var o=document.createElement("dl");for(n in d){var c=d[n];var j=document.createElement("dt");var b=document.createTextNode(n);j.appendChild(b);var m=document.createElement("dd");var k=document.createTextNode(c);m.appendChild(k);o.appendChild(j);o.appendChild(m)}if(o.childNodes.length<1){return false}var h=document.createElement("h3");var l=document.createTextNode("缩略词列表");h.appendChild(l);var e=document.getElementsByTagName("article");if(e.length==0){return false}var a=e[0];a.appendChild(h);a.appendChild(o)}addLoadEvent(stripeTables);addLoadEvent(highLightRows);addLoadEvent(displayAbbreviations);function focusLabels(){if(!document.getElementsByTagName){return false}var b=document.getElementsByTagName("label");for(var a=0;a<b.length;a++){if(!b[a].getAttribute("for")){continue}b[a].onclick=function(){var d=this.getAttribute("for");if(!document.getElementById(d)){return false}var c=document.getElementById(d);c.focus()}}}addLoadEvent(focusLabels);function resetFields(d){for(var c=0;c<d.elements.length;c++){var b=d.elements[c];if(b.type=="submit"){continue}var a=b.placeholder||b.getAttribute("placeholder");if(!a){continue}b.onfocus=function(){var e=this.placeholder||this.getAttribute("placeholder");if(this.value==e){this.classname="";this.value=""}};b.onblur=function(){if(this.value==""){this.className="placeholder";this.value=this.placeholder||this.getAttribute("placeholder")}};b.onblur()}}function isFilled(a){if(a.value.replace(" ","").length===0){return false}var b=a.placeholder||a.getAttribute("placeholder");return(a.value!=b)}function isEmail(a){return(a.value.indexOf("@")!=-1&&a.value.indexOf(".")!=-1)}function validateForm(c){for(var b=0;b<c.elements.length;b++){var a=c.elements[b];if(a.getAttribute("required")==="required"){if(!isFilled(a)){alert("请填写"+a.name+"项");return false}}if(a.type==="email"){if(!isEmail(a)){alert("此"+a.name+"项必须正确填写");return false}}}return true}function prepareForms(){for(var a=0;a<document.forms.length;a++){var b=document.forms[a];resetFields(b);b.onsubmit=function(){if(!validateForm(this)){return false}var c=document.getElementsByTagName("article")[0];if(submitFormWithAjax(this,c)){return false}return ture}}}addLoadEvent(prepareForms);function getHTTPObject(){if(typeof XMLHttpRequest=="undefined"){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return false}}return new XMLHttpRequest()}function displayAjaxLoading(a){while(a.hasChildNodes()){a.removeChild(a.lastChild)}var b=document.createElement("img");b.setAttribute("src","../images/loading.gif");b.setAttribute("alt","loading...");a.appendChild(b)}function submitFormWithAjax(e,a){var d=getHTTPObject();if(!d){return false}displayAjaxLoading(a);var g=[];var c;for(var b=0;b<e.length;b++){c=e.elements[b];g[b]=c.name+"="+encodeURIComponent(c.value)}var f=g.join("&");d.open("POST",e.getAttribute("action"),true);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.onreadystatechange=function(){if(d.readystate==4){if(d.status==200||d.status==0){var h=d.responseText.match(/<article>([\s\S]+)<\/article>/);if(h.length>0){a.innerHTML=h[1]}else{a.innerHTML="<p>糟糕，这里出现了一个错误</p>"}}else{a.innerHTML="<p>"+d.statusText+"<p>"}}};d.send(f);return true};